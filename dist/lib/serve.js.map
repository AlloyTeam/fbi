{"version":3,"sources":["../../src/lib/serve.js"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;AAEA,IAAM,MAAM,mBAAZ;;;wEAEe,iBAAO,IAAP;AAAA;AAAA;AAAA;AAAA;;AAEb,gDAAW,IAAX;;AAEA;AACA,gBAAG,CAAC,IAAD,IAAS,iBAAI,IAAJ,KAAa,QAAzB,EAAkC;AAChC,8BAAI,mBAAJ;AACA,kBAAI,GAAJ,CAAQ,2BAAR;AACA,kBAAI,GAAJ,CAAQ,0BAAR;AACD,aAJD,MAIO;AACL;AACA,kBAAI,GAAJ,CAAQ,yBAAM,iBAAI,MAAJ,CAAW,GAAX,IAAkB,GAAxB,CAAR;AACD;;AAED,gBAAI,MAAJ,CAAW,iBAAI,MAAJ,CAAW,IAAtB,EAA4B,eAAO;AACjC,kBAAI,GAAJ,EAAS;AACP,gCAAI,GAAJ;AACA;AACD;AACD,2DAA+B,iBAAI,MAAJ,CAAW,EAA1C,SAAgD,iBAAI,MAAJ,CAAW,IAA3D;AACD,aAND;;AAda;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","file":"serve.js","sourcesContent":["import Koa from 'koa'\nimport viewer from 'koa-viewer'\nimport serve from 'koa-static'\nimport { log, merge } from '../utils'\nimport error from './serve-error'\nimport cfg from '../config'\n\nconst app = new Koa()\n\nexport default async (ucfg) => {\n\n  merge(cfg, ucfg)\n\n  // no fbi\n  if(!ucfg || cfg.type === 'normal'){\n    log('serve static file')\n    app.use(error())\n    app.use(viewer())\n  } else {\n    // serve static\n    app.use(serve(cfg.static.src || '.'))\n  }\n\n  app.listen(cfg.server.port, err => {\n    if (err) {\n      log(err)\n      return\n    }\n    log(`Server runing at http://${cfg.server.ip}:${cfg.server.port}`)\n  })\n}\n"]}