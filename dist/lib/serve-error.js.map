{"version":3,"sources":["../../src/lib/serve-error.js"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;kBAEe,YAAM;AACnB;AAAA,0EAAO,iBAAO,GAAP,EAAY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEG,MAFH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAIH,kBAAI,GAAJ,CAAQ,IAAR,CAAa,OAAb,eAA2B,GAA3B;;AAEA,kBAAI,MAAJ,GAAa,IAAI,MAAJ,IAAc,GAA3B;AACA,kBAAI,IAAJ,GAAW,kBAAX;AACA,kBAAI,IAAJ,GAAW;AACT,sBAAM,mBAAa,IAAI,MAAjB,CADG;AAET,yBAAS,YAAI;AAFJ,eAAX;;AARG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA;AAcD,C","file":"serve-error.js","sourcesContent":["import { STATUS_CODES } from 'http'\n\nexport default () => {\n  return async (ctx, next) => {\n    try {\n      await next()\n    } catch (err) {\n      ctx.app.emit('error', err, ctx)\n\n      ctx.status = ctx.status || 500\n      ctx.type = 'application/json'\n      ctx.body = {\n        code: STATUS_CODES[ctx.status],\n        message: err.message\n      }\n    }\n  }\n}\n"]}